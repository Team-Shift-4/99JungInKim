Kafka

| Property                                     | 필수                      | Value                                                        | Default                                                      | Description                                                  |
| :------------------------------------------- | :------------------------ | :----------------------------------------------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| `gg.handlerlist`                             | Y                         | *`name`* (choice of any name)                                | None                                                         | -                                                            |
| `gg.handler.name.type`                       | Y                         | `kafka`                                                      | None                                                         | -                                                            |
| `gg.handler.name.KafkaProducerConfigFile`    | N                         | Any custom file name                                         | `kafka-producer-default.properties`                          | Apache Kafka Producer를 구성하기 위해 Apache Kafka Property들을 보유하는 Classpath의 File 이름 |
| `gg.handler.name.Format`                     | N                         | Formatter class or short code.                               | `delimitedtext`                                              | payload의 Formatter<br />`xml`, `delimitedtext`, `json`, `json_row`, `avro_row`, `avro_op`중 택 1 |
| `gg.handler.name.SchemaTopicName`            | Schema 전달이 필수일 때 Y | Name of the schema topic.                                    | None                                                         | Schema Data가 전달될 Topic<br />설정하지 않을 시 Schema를 전달하지 않으며 Avro Formatter에서만 전달 |
| `gg.handler.name.SchemaPrClassName`          | N                         | Fully qualified class name of a custom class that implements Oracle GoldenGate for Big Data Kafka Handler's `CreateProducerRecord` Java Interface. | Provided this implementation class: `oracle.goldengate.handler.kafka``ProducerRecord` | Schema는`ProducerRecord`로도 전달됨<br />Default Key는 정규화된 Table 이름<br />Schema Record에 대해 이를 변경해야 할 경우 `CreateProducerRecord` Interface의 사용자 정의 구현을 작성하고 이 Property가 새 Class의 정규화된 이름을 가리키도록 설정해야 함 |
| `gg.handler.name.BlockingSend`               | N                         | `true` | `false`                                             | `false`                                                      | 이 Property가 `true`일 경우 Kafka로 전달이 완전 동기실 Model에서 동작<br />다음 Payload는 현재 Payload가 의도한 Topic에 기록되고 승인 수신 후 전송됨<br />Transaction 모드에서 정확히 한 번 Semantic을 제공<br />이 Property가 `false`인 경우 Kafka로 전달이 비동기식 Model에서 동작<br />Payload는 승인을 기다리지 않고 차례로 전송됨<br />Kafka Internal Queue에서 처리량을 늘리기 위해 Content를 Buffering 할 수 있음<br />Java Callback을 사용해 Kafka Broker로부터 승인 받은 경우에만 Checkpoint가 생성 |
| `gg.handler.name.mode`                       | N                         | `tx`/`op`                                                    | `tx`                                                         | Kafka Handler Operation 모드를 사용할 시 각 Change Capture Data Record(INSERT, UPDATE, DELETE, etc) Payload가 Kafka Producer Record로 표시되고 한 번에 하나씩 Flush 됨<br />Transaction 모드의 Kafka Handler를 사용하면 Source Transaction 내의 모든 Operation이 단일 Kafka Producer Record로 표시되며 이 결합된 Byte Payload는 Transaction Commit Event에서 Flush됨 |
| `gg.handler.name.topicMappingTemplate`       | Y                         | A template string value to resolve the Kafka topic name at runtime. | None                                                         | [Using Templates to Resolve the Topic Name and Message Key](https://docs.oracle.com/en/middleware/goldengate/big-data/19.1/gadbd/using-kafka-connect-handler.html#GUID-A87CAFFA-DACF-43A0-8C6C-5C64B578D606). |
| `gg.handler.name.keyMappingTemplate`         | Y                         | A template string value to resolve the Kafka message key at runtime. | None                                                         | [Using Templates to Resolve the Topic Name and Message Key](https://docs.oracle.com/en/middleware/goldengate/big-data/19.1/gadbd/using-kafka-connect-handler.html#GUID-A87CAFFA-DACF-43A0-8C6C-5C64B578D606). |
| `gg.hander.name.logSuccessfullySentMessages` | N                         | `true` | `false`                                             | `true`                                                       | `true`로 설정 시 Kafka Handler가 Kafka에 성공적으로 전송된 INFO Level Message를 기록<br />이 Property를 활성화 할 시 성능 저하됨 |
| `gg.handler.name.metaHeadersTemplate`        | N                         | Comma delimited list of metacolumn keywords.                 | None                                                         | 사용자가 Metacolumn Keyword Syntax를 사용해 Context-Based Key-Value Pair를 Kafka Message Header에 삽입할 Metacolumn을 선택 가능 |

Kafka Connector

| Properties                                   | 필수 | Legal Values                                                 | Default | Explanation                                                  |
| :------------------------------------------- | :--- | :----------------------------------------------------------- | :------ | :----------------------------------------------------------- |
| `gg.handler.name.type`                       | Y    | `kafkaconnect`                                               | None    | -                                                            |
| `gg.handler.name.kafkaProducerConfigFile`    | Y    | string                                                       | None    | -                                                            |
| `gg.handler.name.topicMappingTemplate`       | Y    | A template string value to resolve the Kafka topic name at runtime. | None    | -                                                            |
| `gg.handler.name.keyMappingTemplate`         | Y    | A template string value to resolve the Kafka message key at runtime. | None    | -                                                            |
| `gg.handler.name.includeTokens`              | N    | `true` | `false`                                             | `false` | 출력 메세지에 맵 필드를 포함하려면 `true`<br />Key는 Token이고 Value는 Key와 Value가 OGG Source Trace File의 Token Key와 Value인 Map |
| `gg.handler.name.messageFormatting`          | N    | `row` | `op`                                                 | `row`   | 출력 메세지가 모델링되는 방법 제어<br />`row` 선택 시 출력 메세지가 Row로 모델링<br />`op` 선택 시 출력 메세지가 Operation 메세지로 모델링 |
| `gg.handler.name.insertOpKey`                | N    | any string                                                   | `I`     | INSERT를 나타내는 op_type Field의 Value                      |
| `gg.handler.name.updateOpKey`                | N    | any string                                                   | `U`     | UPDATE를 나타내는 op_type Field의 Value                      |
| `gg.handler.name.deleteOpKey`                | N    | any string                                                   | `D`     | DELETE를 나타내는 op_type Field의 Value                      |
| `gg.handler.name.truncateOpKey`              | N    | any string                                                   | `T`     | TRUNCATE를 나타내는 op_type Field의 Value                    |
| `gg.handler.name.treatAllColumnsAsStrings`   | N    | `true` | `false`                                             | `false` | 모든 출력 Field를 문자열 처리를 위해 `true` 설정<br />`false`의 경우 가장 적합한 Kafka Connect Data Type으로 Mapping |
| `gg.handler.name.mapLargeNumbersAsStrings`   | N    | `true` | `false`                                             | `false` | 큰 수를 Double로 숫자 Field에 Mapping<br />특정 시점에서 정밀도가 떨어질 수 있음<br />`true`시 정밀도를 위해 문자열로 매핑 |
| `gg.handler.name.pkUpdateHandling`           | N    | `abend | update | delete-insert`                             | `abend` | 모델링 Row 메세지가 `gg.handler.name.messageFormatting=row`인 경우 가능<br />Update시 모델링 작업 메세지가 전후 이미지로 전파되는 경우 해당하지 않음 |
| `gg.handler.name.metaColumnsTemplate`        | N    | Any of the metacolumns keywords.                             | None    | Template을 나타내는 하나 이상의 Tamplate Value로 구성된 쉼표로 구분된 문자열<br />[Metacolumn Keywords](https://docs.oracle.com/en/middleware/goldengate/big-data/21.1/gadbd/metacolumn-keywords.html#GUID-7231D03B-5470-4E46-9852-C61273D7EEEA) |
| `gg.handler.name.includeIsMissingFields`     | N    | `true|false`                                                 | `true`  | extract{column_name}을 포함하기 위해 `true`로 설정<br />Source Trail File에서 Null값이 실제로 Null인지 또는 Source Trail에서 누락되었는지 Downstream Application이 구분할 수 있도록 해줌 |
| `gg.handler.name.enableDecimalLogicalType`   | N    | `true|false`                                                 | `false` | Kafka Connect에서 Decimal Logical Type을 활성화하기 위해 `true` 설정<br />설정 시 64Bit Data Type에 맞지 않는 숫자를 표현할 수 있음 |
| `gg.handler.name.oracleNumberScale`          | N    | Positive Integer                                             | 38      | `gg.handler.name.enableDecimalLogicalType=true`인 경우에만 적용<br />일부 Source Data Type에는 연관된 Fixed Scale이 없음<br />Kafka Connect Decimal Logical Type에 대해 Scale을 설정해야 함<br />Metadata에 Scalein이 없는 Source 유형의 경우 이 Parameter Value를 사용해 Scale을 설정 |
| `gg.handler.name.EnableTimestampLogicalType` | N    | `true|false`                                                 | `false` | Timestamp Logical Type을 설정하기 위해 `true`<br />Kafka Connect Timestamp Logical Time은 Java Epoch 이후 Milli-Second의 정수 측정 값<br />Timestamp Logical Type이 사용되는 경우 Milli-Second보다 큰 정밀도가 불가능하다는 뜻<br />이 속성을 사용하기 위해 `gg.format.timestamp` 속성을 설정해야 함<br />이 속성은 String Type의 Timestamp Output을 결정하는 데 사용되는 Timestamp Type String<br />예로 `gg.format.timestamp=yyyy-MM-dd HH:mm:ss.SSS`와 같이 사용할 수 있음<br />`goldengate.userexit.timestamp` 속성이 Configuration File에 설정되어 있지 않은 지 확인<br />이 속성을 설정 시 Input Timestamp를 Logical Timestamp에 필요한 Java Object로 Parsing하는 것을 방지할 수 있음 |
| `gg.handler.name.metaHeadersTemplate`        | N    | Comma delimited list of metacolumn keywords.                 | None    | 사용자가 Metacolumn Keyword Syntax를 사용해 Context-based Key-Value Pair를 Kafka Message Header에 삽입할 Metacolumn을 선택할 수 있음<br />[Metacolumn Keywords](https://docs.oracle.com/en/middleware/goldengate/big-data/21.1/gadbd/metacolumn-keywords.html#GUID-7231D03B-5470-4E46-9852-C61273D7EEEA). |
| `gg.handler.name.schemaNamespace`            | N    | Any string without characters which violate the Kafka Connector Avro schema naming requirements. | None    | 생성된 Kafka Connect Schema 이름을 제어하는 데 사용<br />설정되지 않은 경우 Schema 이름은 정규화된 Source Table 이름과 같음<br />이 속성을 사용하면 생성된 Schema 이름을 제어할 수 있음 |
| `gg.handler.name.enableNonnullable`          | N    | `true|false`                                                 | `false` | 기본 동작은 생성된 Kafka Connect Schema에서 모든 Field를 Nullable로 설정하는 것<br />Metadata Provider가 제공한 Target Metadata에 구성된 Nullable Value를 적용하려면 이 속성을 `true`로 설정<br />하지만 이 속성을 `true`로 사용할 경우 부작용 발생 가능<br />Field를 Null을 허용하지 않는 것으로 설정할 시 Field에 유효한 값이 있어야 하며 File가 Null을 허용하지 않는 것으로 고정되고 값이 Null이거나 Source Trail File에서 누락된 경우 Runtime Error가 발생<br />Field를 Null을 허용하지 않는 것으로 설정 시 Truncate 사용 불가하며 그 이유는 Truncate 시 Field 값이 없으며 Kafka Connect Converter 직렬화가 Field가 됨<br />Null을 허용하지 않는 Field를 추가하는 Schema 변경으로 인해 Confluent Schema Registry에서 Schema의 이전 버전과 호환성 예외가 발생하며 발생 시 사용자는 Confluent Schema Registry의 호환성 구성을 조정하거나 비활성화 해야 함 |