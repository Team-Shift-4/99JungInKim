# Apache NiFi 개요

## NiFi란 무엇인가

NiFi는 시스템 간 데이터 흐름을 자동화하기 위해 구축되었다.
데이터 흐름(dataflow)이라는 용어는 다양한 뜻이 있으나 위 뜻은 시스템 간 자동화되고 관리되는 정보 흐름을 의미한다.
데이터 흐름의 몇 가지 높은 수준의 과제는 아래와 같다.

-   시스템 실패
    -   네트워크 장애, 디스크 장애, 소프트웨어 충돌, 사람의 실수 등
-   데이터 엑세스가 소비 용량을 초과
    -   주어진 데이터 소스가 처리나 전달 체인의 소비 용량을 넘을 수 있다.
-   경계 조건은 제안에 불과한 것
    -   너무 크거나, 작거나, 빠르거나, 느리거나, 손상되었거나, 잘못되었거나, 잘못된 형식의 데이터를 얻음
-   노이즈가 시그널이 된 것(What is noise one day becomes signal the next)
    -   조직의 우선순위가 변화하기에 그 흐름에 맞게 변경하는 것이 빨라야 한다.
-   시스템이 다른 속도로 진화한 것
    -   특정 시스템에서 사용하는 프로토콜과 형식은 주변 시스템과 관계없이 언제든지 변경될 수 있다.
        데이터 흐름은 본질적으로 함께 작동되도록 설계되지 않았거나 느슨하게 설계된 구성 요소의 대규모 분산 시스템을 연결하기 위해 존재한다.
-   규정 준수와 보안
    -   볍률, 규정, 정책은 변경되거나 기업 간 계약이 변경될 수 있다.
        시스템 대 시스템과 시스템 대 사용자 상호 작용은 안전하고 신뢰할 수 있어야 한다.
-   지속적 개선에서 생산 발생(Continuous improvement occurs in production)
    -   연구실에서 생산 환경을 복제하는 것이 불가능할 수 있다.

수년 동안 데이터 흐름은 아키텍처에서 필요악 중 하나였다.
데이터 흐름이 더 중요해지는 방향으로 서비스들이 변화하고 있다.
예시로 서비스 지향 아키텍처, API의 부상, IoT, Bigdata 등이 있다.
규정 준수, 개인 정보 보호 및 보안에 필요한 엄격함 수준이 지속적으로 증가하나 데이터 흐름의 패턴과 요구 사항은 여전히 동일하다.
NiFi는 위와 같은 최신 데이터 흐름의 문제를 해결하기 위해 제작되었다.

## NiFi의 핵심 개념

NiFi의 기본 설계 개념은 흐름 기반 프로그래밍(Flow-Based Programming)의 주요 아이디어와 밀접하게 관련이 있다.

| NiFi 용어          | FBP 용어           | 설명                                                         |
| ------------------ | ------------------ | ------------------------------------------------------------ |
| FlowFile           | Information Packet | FlowFile은 시스템을 통해 이동하는 각 객체를 나타낸다.<br />각 객체에 대해 NiFi는 Key/Value 쌍 속성 문자열의 맵과 0 Byte 이상의 관련 컨텐츠를 추적한다. |
| FlowFile Processor | Black Box          | 실제 작업을 수행하는 프로세서이다.<br />eip(Enterprise Integration Patterns) 용어로 프로세서는 시스템 간의 데이터 라우팅, 변환, 중재의 일부 조합을 수행한다.<br />프로세서는 지정된 FlowFile과 콘텐츠 스트림의 속성에 접근 가능하다.<br />프로세서는 주어진 작업 단위에서 0개 이상의 FlowFile에서 작동하고 해당 작업을 커밋하거나 롤백 가능하다. |
| Connection         | Bounded Buffer     | 연결은 프로세서 간 실제 연결을 제공한다.<br />대기열 역할을 하며 다양한 프로세스가 서로 다른 속도로 상호 작용할 수 있도록 한다.<br />이러한 대기열은 동적으로 우선순위를 지정할 수 있으며 부하에 대한 상한을 가질 수 있으므로 역압력을 사용할 수 있다. |
| Flow Controller    | Scheduler          | Flow Controller는 Process가 모든 Process가 사용하는 스레드와 할당을 연결하고 관리하는 방법과 관련된 지식을 유지한다.<br />Flow Controller는 프로세서 간의 FlowFile 교환을 용이하게 하는 브로커 역할을 한다. |
| Process Group      | Subnet             | 프로세스 그룹은 입력 포트를 통해 데이터를 수신하고 출력 포트를 통해 데이터를 보낼 수 있는 특정 프로세스와 연결 집합이다.<br />이러한 방식으로 프로세스 그룹을 사용하면 다른 구성 요소를 간단히 구성해 새로운 구성 요소를 만들 수 있다. |

